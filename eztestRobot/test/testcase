!sh rm $DS_WORK/*.*

!sh cd ${runtest}/positive

!timeout 20000

!sh subvalue2 openhub.atl ${DS_WORK}/openhub_4.0_Dec_1_2011.atl

!sh al_engine ${al_engine_param} -U$REPOID -P$REPOPW -f${DS_WORK}/openhub_4.0_Dec_1_2011.atl -z${runtest}/work/openhub_4.0_Dec_1_2011.txt -passphrasedsplatform

!sh al_engine ${al_engine_param} -U$REPOID -P$REPOPW -fsubstitution_parameters_openhub_4.0.atl -z${runtest}/work/substitution_parameters_openhub_4.0.txt -passphrasedsplatform

!testcase openhub01
!sh eim_launcher.sh openhub01_script

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub01.out ${DS_WORK}/openhub01.out
!endtestcase

!testcase openhub02
!sh eim_launcher.sh openhub02_table32

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub_table32.out ${DS_WORK}/openhub_table32.out
!endtestcase


!testcase openhub03
!sh eim_launcher.sh openhub03_table32

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub03_table32.out ${DS_WORK}/openhub03_table32.out
!endtestcase


!testcase openhub04
!sh eim_launcher.sh openhub04_subsparam

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub04_subsparam.out ${DS_WORK}/openhub04_subsparam.out
!endtestcase


!testcase openhub05
!sh eim_launcher.sh openhub05_changedest

## Checked with Srini, this is supposed to be negative testcase
!sh sleep 120
!expect *Failed*
!sh adiff ${runtest}/goldlog/openhub12.out ${DS_WORK}/openhub12.out
!endtestcase


!testcase openhub06
!sh eim_launcher.sh openhub06_readparallel

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub12_read1.out ${DS_WORK}/openhub12_read1.out
!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub12_read2.out ${DS_WORK}/openhub12_read2.out
!endtestcase


!testcase openhub07

!expect no *Failed*
!sh eim_launcher.sh openhub07_multpc

!endtestcase


!testcase openhub08

!expect no *Failed*
!sh eim_launcher.sh openhub08_subsparam

!endtestcase


!testcase openhub09

!expect no *Failed*
!sh eim_launcher.sh openhub09_multpc2

!endtestcase


!testcase openhub10
!sh eim_launcher.sh openhub10_where

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub10_where.out ${DS_WORK}/openhub10_where.out
!endtestcase


!testcase openhub11
!sh eim_launcher.sh openhub11_groupby

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub11_groupby.out ${DS_WORK}/openhub11_groupby.out
!endtestcase


!testcase openhub13
!sh eim_launcher.sh openhub13_packets

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub13_packets_16.out ${DS_WORK}/openhub13_packets_16.out
!endtestcase


!testcase openhub14
!sh eim_launcher.sh openhub14_PCinsequence

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub_table342.out ${DS_WORK}/openhub_table342.out
!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub13_packets_16.out ${DS_WORK}/openhub13_packets_16.out
!endtestcase


!testcase openhub15a
!sh eim_launcher.sh openhub15_parallelwf

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub15_parallel1.out ${DS_WORK}/openhub15_parallel1.out
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub15_parallel2.out ${DS_WORK}/openhub15_parallel2.out
!endtestcase


!testcase openhub15
!sh eim_launcher.sh openhub15_samedf

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub15_1.out ${DS_WORK}/openhub15_1.out
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub15_2.out ${DS_WORK}/openhub15_2.out
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub15_3.out ${DS_WORK}/openhub15_3.out
!endtestcase


!testcase openhub16
!sh eim_launcher.sh openhub16_read2tables

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub13_packets_16.out ${DS_WORK}/openhub13_packets_16.out
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub_16_2.out ${DS_WORK}/openhub_16_2.out
!endtestcase


!testcase openhub17
!sh eim_launcher.sh openhub17_scriptreader

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub01.out ${DS_WORK}/openhub01.out
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub03_table32.out ${DS_WORK}/openhub03_table32.out
!endtestcase


!testcase openhub18
!sh eim_launcher.sh openhub18_join

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub18_join.out ${DS_WORK}/openhub18_join.out
!endtestcase


!testcase openhub19
!sh eim_launcher.sh openhub19_delta

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub19_delta.out ${DS_WORK}/openhub19_delta.out
!endtestcase


!testcase openhub20
!sh eim_launcher.sh openhub20_lesscolumns

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub20_lesscolumns.out ${DS_WORK}/openhub20_lesscolumns.out
!endtestcase


!testcase openhub22
!sh eim_launcher.sh openhub22_diffschema

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/oherr03_difftable.out ${DS_WORK}/oherr03_difftable.out
!endtestcase


!testcase openhub22a
!sh eim_launcher.sh openhub22_table13

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub13.out ${DS_WORK}/openhub13.out
!endtestcase


!testcase openhub23
!expect no *Failed*
!sh eim_launcher.sh openhub23_optionalfields

!endtestcase


!testcase openhub24
!expect no *Failed*
!sh eim_launcher.sh openhub24_audit

!endtestcase


!testcase openhub25
!sh eim_launcher.sh openhub25_emb

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub25_emb.out ${DS_WORK}/openhub25_emb.out
!endtestcase


!testcase openhub26
!sh eim_launcher.sh openhub26_emb

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub26_emb.out ${DS_WORK}/openhub26_emb.out
!endtestcase


!testcase openhub27
!sh eim_launcher.sh openhub27_subsparam1

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub01.out ${DS_WORK}/openhub01.out
!endtestcase


!testcase openhub28
!sh eim_launcher.sh openhub28_readinparallel

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub03_table32.out ${DS_WORK}/openhub03_table32.out
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub_table342.out ${DS_WORK}/openhub_table342.out
!endtestcase


!testcase openhub29
!sh eim_launcher.sh openhub29_table32full

!sh sleep 120
#!expect no *Failed*
#!sh adiff ${runtest}/goldlog/openhub_table32full.out ${DS_WORK}/openhub_table32full.out

#we should only check if there are rows returned and its sufficient
!expect no 0
!sh du ${DS_WORK}/openhub30_errordtp2.out | awk '{ print $1 }'

!endtestcase


!testcase openhub30
!sh eim_launcher.sh openhub30_witherrordtp

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub30_errordtp1.out ${DS_WORK}/openhub30_errordtp1.out
#we should only check if there are rows returned and its sufficient
!expect no 0
!sh du ${DS_WORK}/openhub30_errordtp2.out | awk '{ print $1 }'

#!expect no *Failed*
#!sh adiff ${runtest}/goldlog/openhub30_errordtp2.out ${DS_WORK}/openhub30_errordtp2.out
!endtestcase


!testcase openhub31
!sh eim_launcher.sh openhub31_parallelsamerfc

!sh sleep 120
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub_table342.out ${DS_WORK}/openhub_table342.out
!expect no *Failed*
!sh adiff ${runtest}/goldlog/openhub20_lesscolumns.out ${DS_WORK}/openhub20_lesscolumns.out
!endtestcase

